# tests/docker-compose.tests.yml
services:
  nether-bridge:
    build: ../
    # No container_name for dynamic test environments
    networks:
      - mc-network
    ports:
      - "19132:19132/udp"
      - "25565:25565/tcp"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ../settings.json:/app/settings.json
      - ../servers.json:/app/servers.json

  mc-bedrock:
    image: itzg/minecraft-bedrock-server:latest
    restart: "no" # Ensures the container does not restart after being stopped by the proxy
    networks:
      - mc-network
    environment:
      - EULA=TRUE

  mc-java:
    image: itzg/minecraft-server:latest
    restart: "no" # Ensures the container does not restart after being stopped by the proxy
    networks:
      - mc-network
    environment:
      - EULA=TRUE
      - TYPE=PAPER

networks:
  mc-network:
    driver: bridge