# Start from the official Bedrock server image
FROM itzg/minecraft-bedrock-server:latest

# The server files will be installed in the /data directory
WORKDIR /data

# Temporarily install curl and unzip, download the specific server version,
# extract it, and then clean up to keep the image small.
RUN apt-get update && apt-get install -y curl unzip && \
    curl -L -o bedrock.zip \
    -A "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36" \
    "https://www.minecraft.net/bedrockdedicatedserver/bin-linux/bedrock-server-1.20.81.01.zip" && \
    unzip bedrock.zip && \
    rm bedrock.zip && \
    apt-get purge -y --auto-remove curl unzip && \
    rm -rf /var/lib/apt/lists/*